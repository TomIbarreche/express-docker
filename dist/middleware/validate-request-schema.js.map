{"version":3,"sources":["../../src/middleware/validate-request-schema.js"],"names":["body","validationResult","require","ApiError","Validator","checkRules","req","res","next","errors","isEmpty","errorMsg","i","length","msg","badRequest","module","exports"],"mappings":";;AAAA,MAAM,EAAEA,IAAF,EAAQC,gBAAR,KAA6BC,QAAQ,mBAAR,CAAnC;AACA,MAAMC,WAAWD,QAAQ,mBAAR,CAAjB;;AAEA,MAAME,SAAN,CAAe;AACXC,eAAWC,GAAX,EAAgBC,GAAhB,EAAqBC,IAArB,EAA2B;AACvB,cAAMC,SAASR,iBAAiBK,GAAjB,CAAf;AACA,YAAG,CAACG,OAAOC,OAAP,EAAJ,EAAqB;AACjB,gBAAIC,WAAW,EAAf;AACA,iBAAK,IAAIC,IAAE,CAAX,EAAcA,IAAIH,OAAOA,MAAP,CAAcI,MAAhC,EAAwCD,GAAxC,EAA4C;AACrC,oBAAIA,KAAKH,OAAOA,MAAP,CAAcI,MAAd,GAAuB,CAAhC,EAAkC;AACjCF,gCAAYF,OAAOA,MAAP,CAAcG,CAAd,EAAiBE,GAAjB,GAAuB,OAAnC;AACA,iBAFD,MAEM;AACLH,gCAAYF,OAAOA,MAAP,CAAcG,CAAd,EAAiBE,GAA7B;AACA;AACP;AACDN,iBAAKL,SAASY,UAAT,CAAoBJ,QAApB,CAAL;AACA;AACH;AACDH;AACH;AAhBU;;AAqBfQ,OAAOC,OAAP,GAAiB,IAAIb,SAAJ,EAAjB","file":"validate-request-schema.js","sourcesContent":["const { body, validationResult}  = require('express-validator');\r\nconst ApiError = require('../error/ApiError');\r\n\r\nclass Validator{\r\n    checkRules(req, res, next) {\r\n        const errors = validationResult(req);\r\n        if(!errors.isEmpty()){\r\n            let errorMsg = \"\";\r\n            for (let i=0; i < errors.errors.length; i++){\r\n                   if (i != errors.errors.length - 1){\r\n                    errorMsg += errors.errors[i].msg + \" and \";\r\n                   }else {\r\n                    errorMsg += errors.errors[i].msg;\r\n                   }\r\n            }\r\n            next(ApiError.badRequest(errorMsg));\r\n            return;\r\n        }\r\n        next();\r\n    }\r\n}\r\n\r\n\r\n\r\nmodule.exports = new Validator();"]}